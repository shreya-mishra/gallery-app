(this["webpackJsonpgallery-app"]=this["webpackJsonpgallery-app"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(13),r=a.n(s),i=(a(80),a(35),a(142)),l=a(1),o=function(){return Object(l.jsx)("footer",{children:Object(l.jsx)(i.a,{children:Object(l.jsx)("div",{children:Object(l.jsx)("div",{style:{textAlign:"center",marginBottom:10},className:"text-center py-3",children:"Copyright \xa9 Gallery App"})})})})},j=a(145),d=a(15),u="LOGIN",b="LOGOUT",p="USER_UPDATE",h=function(){return{type:p}},m=Object(d.b)((function(e){return{user:e.user.user}}),(function(e){return{logout:function(){return e({type:b})}}}))((function(e){var t=e.logout,a=e.user;return Object(l.jsxs)(i.a,{children:[console.log(a),Object(l.jsxs)("div",{style:{textAlign:"center",fontFamily:"Otomanopee One"},children:[Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(l.jsx)("div",{style:{width:"100px"}}),a?Object(l.jsxs)("h1",{children:["Welcome To ",a.name,"'s Gallery"]}):Object(l.jsx)("h1",{children:"Welcome To Your Gallery"}),Object(l.jsx)(j.a,{variant:"text",color:"secondary",onClick:t,children:"Logout"})]})]}),Object(l.jsx)("div",{style:{height:40}})]})})),O=a(5),g=a(21),f=a.n(g),x=a(26),y=a.n(x),v=a(29),N=a(156),F=a(146),S=Object(F.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),w=function(e){var t=e.severity,a=void 0===t?"error":t,n=e.children,c=S();return Object(l.jsx)("div",{className:c.root,children:Object(l.jsx)(N.a,{severity:a,children:Object(l.jsx)("strong",{children:n})})})},C=a(147),I=function(e){var t=e.size,a=void 0===t?100:t;return Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:[Object(l.jsx)(C.a,{style:{width:a,height:a,color:"wheat"}}),";"]})},U=Object(d.b)((function(e){return{user:e.user.user}}),(function(e){return{toggleUserUpdate:function(){return e(h())}}}))((function(e){var t=e.refreshData,a=e.user,c=e._title,s=e._id,r=e._description,i=e.img,o=e.buttonType,j=e.toggleUserUpdate,d=(e.openForm,e.setOpenForm),u=Object(n.useState)("update"===o),b=Object(O.a)(u,1)[0],p=Object(n.useState)(b?c:""),h=Object(O.a)(p,2),m=h[0],g=h[1],x=Object(n.useState)(b?r:""),N=Object(O.a)(x,2),F=N[0],S=N[1],C=Object(n.useState)(b?i:""),U=Object(O.a)(C,2),k=U[0],_=U[1],A=Object(n.useState)(null),L=Object(O.a)(A,2),D=L[0],P=L[1],E=Object(n.useState)(!1),B=Object(O.a)(E,2),T=B[0],z=B[1],G=Object(n.useState)(!1),M=Object(O.a)(G,2),q=M[0],H=M[1],J=Object(n.useState)({}),W=Object(O.a)(J,2),K=(W[0],W[1]),R=function(){var e=Object(v.a)(y.a.mark((function e(n){var c,s,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,c={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(a.token)}},H(!0),e.next=6,f.a.post("/api/gallery/create",{title:m,description:F,img:k},c);case 6:s=e.sent,r=s.data,console.log(r),H(!1),d(!1),t(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),z(e.t0),H(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"formCenter",style:{textAlign:"center"},children:[T&&Object(l.jsx)(w,{children:T}),q&&Object(l.jsx)(I,{}),Object(l.jsx)("div",{style:{textAlign:"center",fontFamily:"Otomanopee One"},children:b?"Update Image":"Gallery Image"}),Object(l.jsxs)("form",{className:"formFields",children:[Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel1",htmlFor:"title",children:"Title"}),Object(l.jsx)("input",{type:"text",id:"title",className:"formFieldInput1",placeholder:"Enter your title",name:"title",onChange:function(e){console.log(e.target.value),g(e.target.value)},value:m})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel1",htmlFor:"description",children:"caption"}),Object(l.jsx)("input",{type:"description",id:"description",className:"formFieldInput1",placeholder:"Enter your description",name:"description",onChange:function(e){return S(e.target.value)},value:F})]}),D&&Object(l.jsx)(w,{children:D}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel1",htmlFor:"galleryImage",children:"Image"}),Object(l.jsx)("input",{type:"file",id:"galleryImage",accept:"image/*",className:"formFieldInput1",placeholder:"Choose your Gallery Image",name:"galleryImage",onChange:function(e){!function(e){if(console.log(e),!e)return P("Please Select an Image");if(P(null),"image/jpeg"!==e.type&&"image/png"!==e.type)return P("Please Select an Image");var t=new FormData;t.append("file",e),t.append("upload_preset","gallery-app"),t.append("cloud_name","dfi2yf43v"),fetch("https://api.cloudinary.com/v1_1/dfi2yf43v/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){console.log(e),_(e.url.toString())})).catch((function(e){console.log(e)}))}(e.target.files[0]),console.log("your gallery image",e.target.files[0])}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsx)("div",{className:"formField",children:b?Object(l.jsx)("button",{className:"formFieldButton",onClick:function(e){console.log("user & id of the post",a,s),e.preventDefault(),H(!0);try{var n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(a.token)}};console.log("DATAAAA",i,c,r),f.a.put("/api/gallery/".concat(s),{img:k,title:m,description:F},n).then((function(e){console.log(e.data),K(e.data),H(!1),j(),t()})),console.log("data is here","data")}catch(T){console.log(T),z(!0)}},children:"Update"}):Object(l.jsx)("button",{className:"formFieldButton",onClick:R,children:"Submit"})})]})]})})),k=a(68),_=a(149),A=a(150),L=a(154),D=a(152),P=a(151),E=a(153),B=a(155),T=a(148),z=a(115),G=Object(F.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{border:"2px solid black",height:"50%",width:"60%",backgroundColor:"#eee7dc",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},image:{maxHeight:"100%",width:"100%"}}}));function M(e){var t=Object.assign({},e),a=G(),n=t.open,c=t.handleClose;return Object(l.jsx)("div",{children:Object(l.jsx)(B.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:n,onClose:c,BackdropComponent:T.a,BackdropProps:{timeout:500},children:Object(l.jsx)(z.a,{in:n,children:Object(l.jsxs)("div",{className:a.paper,children:[" ",t.children]})})})})}var q=["user","refreshData","item"],H=Object(F.a)({root:{maxWidth:345},media:{height:140,objectFit:"contain"}}),J=Object(d.b)((function(e){return{user:e.user.user,isUserUpdate:e.user.isUserUpdate}}),null)((function(e){var t=e.user,a=e.refreshData,c=e.item,s=Object(k.a)(e,q),r=H(),i=Object(n.useState)(!1),o=Object(O.a)(i,2),d=(o[0],o[1]),u=Object(n.useState)(!1),b=Object(O.a)(u,2),p=b[0],h=b[1],m=Object(n.useState)(!1),g=Object(O.a)(m,2),x=g[0],y=g[1],v=Object(n.useState)(!1),N=Object(O.a)(v,2),F=N[0],S=N[1];return Object(l.jsxs)(_.a,{className:r.root,children:[Object(l.jsx)(M,{open:p,handleClose:function(){h(!1)},children:Object(l.jsx)(U,{refreshData:function(){a(),d(!1)},_id:c._id,_title:c.title,_description:c.description,img:c.img,buttonType:"update"})}),Object(l.jsxs)(l.Fragment,{children:[console.log(c._id),F&&Object(l.jsx)(I,{}),x&&Object(l.jsx)(w,{children:x}),Object(l.jsxs)(A.a,{onClick:s.onClick,children:[Object(l.jsx)(P.a,{className:r.media,image:c.img,title:c.title}),Object(l.jsxs)(D.a,{children:[Object(l.jsx)(E.a,{gutterBottom:!0,variant:"h5",component:"h2",children:c.title}),Object(l.jsx)(E.a,{variant:"body2",color:"textSecondary",component:"p",children:c.description})]})]},c._id),Object(l.jsxs)(L.a,{children:[Object(l.jsx)(j.a,{size:"large",color:"primary",onClick:function(e){console.log("called"),e.stopPropagation(),d(!0),h(!0)},children:"Update"}),Object(l.jsx)(j.a,{size:"large",color:"secondary",onClick:function(){return function(e){console.log("id of the particular card",e),console.log("user",t);try{var n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}};S(!0),f.a.delete("/api/gallery/".concat(e),n).then((function(e){console.log(e.data),S(!1),a()})),console.log("data is here","data")}catch(x){console.log(x),y(!0)}}(c._id)},children:"Delete"})]})]})]})})),W=Object(d.b)((function(e){return{user:e.user.user,isUserUpdate:e.user.isUserUpdate}}),(function(e){return{toggleUserUpdate:function(){return e(h())}}}))((function(e){var t=e.user,a=e.toggleUserUpdate,s=e.isUserUpdate,r=Object(n.useState)(!1),i=Object(O.a)(r,2),o=i[0],d=i[1],u=Object(n.useState)({}),b=Object(O.a)(u,2),p=b[0],h=b[1],m=Object(n.useState)(!1),g=Object(O.a)(m,2),x=g[0],y=g[1],v=Object(n.useState)(!1),N=Object(O.a)(v,2),F=N[0],S=N[1],C=Object(n.useState)([]),k=Object(O.a)(C,2),_=k[0],A=k[1],L=Object(n.useState)(!1),D=Object(O.a)(L,2),P=D[0],E=D[1],B=Object(n.useState)(s),T=Object(O.a)(B,1)[0],z=Object(n.useState)("initialKey"),G=Object(O.a)(z,2),q=G[0],H=G[1];Object(n.useEffect)((function(){S(!0),W(),s&&a()}),[T]);var W=function(){try{var e={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}};S(!0),f.a.get("/api/gallery",e).then((function(e){console.log(e.data),A(e.data),S(!1),H(Math.random().toString())})),console.log("data is here","data")}catch(P){console.log(P),E(!0)}},K=function(){y(!1),d(!1)};return Object(l.jsxs)(l.Fragment,{children:[console.log("gallery inside return",_),F&&Object(l.jsx)(I,{}),P&&Object(l.jsx)(w,{}),Object(l.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){y(!0)},children:"Add New Image"}),Object(l.jsx)(M,{open:x,handleClose:K,children:Object(l.jsx)(U,{refreshData:W,openForm:x,setOpenForm:y})}),Object(l.jsx)(M,{open:o,handleClose:K,children:Object(l.jsx)("img",{style:{maxHeight:"100%",width:"100%"},src:p.img,alt:"image"})}),Object(l.jsx)("div",{className:"gallery__container",children:Object(l.jsx)(c.a.Fragment,{style:{display:"none"},children:_.map((function(e){return Object(l.jsx)("div",{className:"gallery__card",children:Object(l.jsx)(J,{onClick:function(){return function(e){console.log(e),d(!0),h(e)}(e)},item:e,refreshData:W})},e._id)}))},q)})]})})),K=a(22),R=Object(d.b)(null,(function(e){return{login:function(t){return e(function(e){return{type:u,payload:e}}(t))}}}))((function(e){var t=e.login,a=Object(n.useState)(""),c=Object(O.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(""),o=Object(O.a)(i,2),j=o[0],d=o[1],u=Object(n.useState)(!1),b=Object(O.a)(u,2),p=b[0],h=b[1],m=Object(n.useState)(!1),g=Object(O.a)(m,2),x=g[0],N=g[1],F=function(){var e=Object(v.a)(y.a.mark((function e(a){var n,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={headers:{"Content-type":"application/json"}},N(!0),e.next=6,f.a.post("/api/users/login",{email:s,password:j},n);case 6:c=e.sent,r=c.data,console.log(r),t(r),N(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),h(e.t0.response.data.message),N(!1);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"appForm",children:[Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"pageSwitcher",children:[Object(l.jsx)(K.b,{to:"/sign-in",activeClassName:"pageSwitcherItem-active",className:"pageSwitcherItem",children:"Sign In"}),Object(l.jsx)(K.b,{exact:!0,to:"/sign-up",activeClassName:"pageSwitcherItem-active",className:"pageSwitcherItem",children:"Sign Up"})]})]}),Object(l.jsxs)("div",{className:"formCenter",children:[p&&Object(l.jsx)(w,{children:p}),x&&Object(l.jsx)(I,{}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("form",{className:"formFields",onSubmit:F,children:[Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"email",children:"E-Mail Address"}),Object(l.jsx)("input",{type:"email",id:"email",className:"formFieldInput",placeholder:"Enter your email",name:"email",onChange:function(e){return r(e.target.value)}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",id:"password",className:"formFieldInput",placeholder:"Enter your password",name:"password",onChange:function(e){return d(e.target.value)}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("button",{className:"formFieldButton",children:"Sign In"})," "]})]})]})]})})),Y=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(O.a)(s,2),i=r[0],o=r[1],j=Object(n.useState)("https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg"),d=Object(O.a)(j,2),u=d[0],b=d[1],p=Object(n.useState)(""),h=Object(O.a)(p,2),m=h[0],g=h[1],x=Object(n.useState)(""),N=Object(O.a)(x,2),F=N[0],S=N[1],C=Object(n.useState)(null),U=Object(O.a)(C,2),k=U[0],_=U[1],A=Object(n.useState)(null),L=Object(O.a)(A,2),D=L[0],P=L[1],E=Object(n.useState)(!1),B=Object(O.a)(E,2),T=B[0],z=B[1],G=Object(n.useState)(!1),M=Object(O.a)(G,2),q=M[0],H=M[1],J=function(){var e=Object(v.a)(y.a.mark((function e(t){var n,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m===F){e.next=5;break}_("Passwords Do Not Match"),e.next=22;break;case 5:return _(null),e.prev=6,n={headers:{"Content-type":"application/json"}},H(!0),e.next=11,f.a.post("/api/users",{name:a,profile:u,email:i,password:m},n);case 11:c=e.sent,s=c.data,console.log(s),H(!1),localStorage.setItem("userInfo",JSON.stringify(s)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),z(e.t0.response.data.message),H(!1);case 22:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"appForm",children:[Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"pageSwitcher",children:[Object(l.jsx)(K.b,{to:"/sign-in",activeClassName:"pageSwitcherItem-active",className:"pageSwitcherItem",children:"Sign In"}),Object(l.jsx)(K.b,{exact:!0,to:"/sign-up",activeClassName:"pageSwitcherItem-active",className:"pageSwitcherItem",children:"Sign Up"})]})]}),Object(l.jsxs)("div",{className:"formCenter",children:[T&&Object(l.jsx)(w,{children:T}),k&&Object(l.jsx)(w,{children:k}),q&&Object(l.jsx)(I,{}),Object(l.jsxs)("form",{onSubmit:J,className:"formFields",children:[Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"name",children:"Full Name"}),Object(l.jsx)("input",{required:!0,type:"text",id:"name",className:"formFieldInput",placeholder:"Enter your full name",name:"name",onChange:function(e){return c(e.target.value)}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"email",children:"E-Mail Address"}),Object(l.jsx)("input",{required:!0,type:"email",id:"email",className:"formFieldInput",placeholder:"Enter your email",name:"email",onChange:function(e){return o(e.target.value)}})]}),Object(l.jsx)("div",{style:{height:20}}),D&&Object(l.jsx)(w,{children:D}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"profile",children:"Profile"}),Object(l.jsx)("input",{type:"file",id:"profile",accept:"image/*",className:"formFieldInput",placeholder:"Choose your profile",name:"profile",onChange:function(e){return function(e){if(!e)return P("Please Select an Image");if(P(null),"image/jpeg"!==e.type&&"image/png"!==e.type)return P("Please Select an Image");var t=new FormData;t.append("file",e),t.append("upload_preset","gallery-app"),t.append("cloud_name","dfi2yf43v"),fetch("https://api.cloudinary.com/v1_1/dfi2yf43v/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){console.log(e),b(e.url.toString())})).catch((function(e){console.log(e)}))}(e.target.files[0])}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{required:!0,type:"password",id:"password",className:"formFieldInput",placeholder:"Enter your password",name:"password",onChange:function(e){return g(e.target.value)}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("label",{className:"formFieldLabel",htmlFor:"confirmPassword",children:"Confirm Password"}),Object(l.jsx)("input",{required:!0,type:"password",id:"confirmPassword",className:"formFieldInput",placeholder:"Enter your Confirm Password",name:"confirmPassword",onChange:function(e){return S(e.target.value)}})]}),Object(l.jsx)("div",{style:{height:20}}),Object(l.jsxs)("div",{className:"formField",children:[Object(l.jsx)("button",{className:"formFieldButton",children:"Sign Up"})," "]})]})]})]})},Q=a(8),V=function(){return Object(l.jsx)("h1",{children:"404 Not Found!!"})};var X=Object(d.b)((function(e){return{isLoggedIn:e.user.isLoggedIn}}),null)((function(e){var t=e.isLoggedIn;return Object(l.jsx)(K.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(m,{}),Object(l.jsx)("home",{style:{minHeight:"100vh",width:"80%"},children:Object(l.jsxs)(Q.d,{children:[Object(l.jsx)(Q.b,{exact:!0,path:"/sign-up",component:Y}),Object(l.jsx)(Q.b,{path:"/sign-in",render:function(){return t?Object(l.jsx)(Q.a,{to:"/"}):Object(l.jsx)(R,{})}}),Object(l.jsx)(Q.b,{exact:!0,path:"/",render:function(){return t?Object(l.jsx)(W,{}):Object(l.jsx)(Q.a,{to:"/sign-in"})}}),Object(l.jsx)(Q.b,{component:V})]})}),Object(l.jsx)(o,{})]})})})),Z=a(66),$=a(25),ee=a(49),te={user:{},isLoggedIn:!1,isUserUpdate:!0},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{user:t.payload,isLoggedIn:!0};case b:return{user:{},isLoggedIn:!1};case p:return Object(ee.a)(Object(ee.a)({},e),{},{isUserUpdate:!e.isUserUpdate});default:return e}},ne=a(42),ce=a(67),se={key:"root",storage:a.n(ce).a,whitelist:["user"]},re=Object($.b)({user:ae}),ie=Object(ne.a)(se,re);a(111);var le=Object($.c)(ie,$.a.apply(void 0,[])),oe=Object(ne.b)(le);r.a.render(Object(l.jsx)(d.a,{store:le,children:Object(l.jsx)(K.a,{children:Object(l.jsx)(Z.a,{persistor:oe,children:Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(X,{})})})})}),document.getElementById("root"))},35:function(e,t,a){},80:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.2a4499c5.chunk.js.map